# qmetry-test-management-gradle-plugin
QMetry Test Management plugin for Gradle has been designed to seamlessly integrate your CI/CD pipeline with QMetry.

QTMGradlePlugin uploads result file(s) generated in a Gradle project to QTM Enterprise server.
The plugin, if used in a gradle project, provides an additional gradle task 'publishResults'

## How to use the plugin?
to install the plugin in your local maven repository. 
```
gradle clean install
```
Use the plugin from anywhere in a gradle project, by including a configuration in **build.gradle** file.
The task *publishResults* always looks for *qmetryConfig {... }* in build.gradle file of your project. Provide following details :-

* **qtmUrl** - url to qtm instance
* **qtmAutomationApiKey** - Automation Key
* **automationFramework** - JUNIT/TESTNG/CUCUMBER/QAS/HPUFT
* **testSuite** (optional) - Key of test suite.
* **project** - Target Project ID or project Key or project name.
* **release** (optional if cycle not present) - Target Release ID or Release name.
* **cycle** (optional) - Target Cycle Id or Cycle Name
* **build** (optional) - Target Build ID or Build name.
* **testResultFilePath** - path to result file (or directory for multiple files) relative to build directory
* **platform** (optional) - Name of the platform to connect the suite
* **testcase_fields** (optional) - To upload Test case fields
* **testsuite_fields** (optional) - To upload Test suite fields

Include the following code in your **build.gradle** file. Change qmetryConfig values as required.
```
apply plugin: 'com.qmetry.qtmgradleplugin'

qmetryConfig 
{
	qtmUrl='https://testmanagement.qmetry.com/'
	qtmAutomationApiKey='Pyqkya0sRRTku9NfRiWAP67GVz8dHD7DoX0X83Fv'
	automationFramework='JUNIT'
	testResultFilePath='/test-results/'
	platform='chrome'
	testSuite='GRA-TS-1'
	build=''
	project='GradleFirst'
	release='Release2'
	cycle='cycle301'
	testcase_fields='{"component":["label1"],"priority":"Minor","testCaseState":"Open","testCaseType":"UI","testcaseOwner":"Nitesh","estimatedTime":6,"description":"this is description of test case generated through automation","userDefinedFields":{"DTP":"08-29-2019","number":1,"LT":"sdvhibibri","MLUL":["a","b"],"dss":"dsnvisndiv","list_QTM8_3538":["aa"]}}' 
	testsuite_fields='{"testSuiteState":"Open","testsuiteOwner":"Nitesh","description":"this is description of test suite generated through automation","userDefinedFields":{"xyz":"fsajf;ljsa;f as;fj as"}}'
}

buildscript
{
    repositories
	{
        mavenLocal()
		mavenCentral()
    }
    dependencies
	{
        classpath 'com.qmetry:QTMGradlePlugin:1.0'
    }
}
```
now, use the following command from your project directory.
```
gradle test publishResults
```
**Or** alternatively, use the executable jar file generated by command 
```
gradle clean build
```
Use the jar file directly as a dependency in your Gradle project *build.gradle* file.